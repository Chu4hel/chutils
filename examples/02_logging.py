# examples/02_logging.py
import os
from chutils import setup_logger, ChutilsLogger

# Настраиваем логгер.
# Он автоматически прочитает секцию [Logging] из config.yml.
# В config.yml настроена ротация по размеру (1МБ) со сжатием и 5 бэкапами.
# Логи будут выводиться в консоль и в файл logs/example_app.log
# (папка logs будет создана в корне проекта).
logger: ChutilsLogger = setup_logger("example_logger")

logger.info("Это информационное сообщение.")
logger.debug("Это сообщение для отладки.")
logger.warning("А это - предупреждение.")

# Используем кастомные уровни
logger.mediumdebug("Сообщение со средней детализацией.")
logger.devdebug("Сообщение с максимальной детализацией для разработчика.")

logger.info("--- Демонстрация ротации логов по размеру со сжатием ---")
logger.info("В config.yml установлен max_bytes: 1048576 (1МБ) и compress: true.")
logger.info("Будет записано много сообщений, чтобы вызвать ротацию.")
logger.info("После завершения проверьте папку 'logs' в корне проекта.")
logger.info("Вы должны увидеть файлы 'example_app.log' и несколько 'example_app.log.N.gz'.")

# Записываем много сообщений, чтобы вызвать ротацию
for i in range(15000): # Количество сообщений, достаточное для превышения 1МБ
    logger.info(f"Это сообщение номер {i}. Оно поможет заполнить лог-файл и вызвать ротацию.")

logger.info("Пример логирования завершен. Проверьте консоль и папку 'logs' в корне проекта.")
logger.info("Вы должны увидеть ротированные и сжатые файлы логов.")

